<div class="mx-auto md:w-2/3 w-full flex">
  <div class="mx-auto">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div data-controller="info-box">
    <div class="info-button">&#x24D8;</div>
    <ul class="info-box">
      <li>This page lists all couples (dance partnerships) currently entered at the event.
      <li><strong>Dances column</strong>: Shows the total number of heats for this couple partnership.
      <li><strong>Level</strong>: Displays the higher level of the two partners (couples dance at the higher partner's level).
      <li><strong>Category</strong>: Shows the age category (if age tracking is enabled). Uses the younger partner's age category.
      <li>Click on a person's name to view their full profile and see all their partnerships.
      <li>Click on studio name to view that studio's details and all participants.
      <li><strong>Couple types:</strong>
        <ul class="ml-4 list-disc">
          <li><strong>Pro-Am</strong>: Professional dancing with a Student</li>
          <li><strong>Amateur Couple</strong>: Two Students dancing together</li>
          <li><strong>Pro-Pro</strong>: Two Professionals dancing together</li>
        </ul>
      <li>Use "Couple Entries" button to filter entries by couple type and see detailed heat breakdowns.
    </ul>
  </div>

  <div class="flex justify-between items-center">
  <h1 class="mx-auto font-bold text-4xl mb-4">Couples</h1>
  </div>

  <table class="table-fixed mx-auto">
    <thead>
      <tr>
        <th class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Dances</th>
        <th class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Lead</th>
        <th class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Follow</th>
        <th class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Studio</th>
        <th class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Level</th>
        <% if @track_ages %>
        <th class="border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left">Category</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @couples.each do |lead, follow, count| %>
      <tr>
        <td class="text-right px-2"><%= count %></td>
        <td class="px-2"><%= link_to lead.display_name, lead %></td>
        <td class="px-2"><%= link_to follow.display_name, follow %></td>
        <td class="px-2"><%= link_to lead.studio.name, lead.studio %></td>
        <td class="px-2">
          <%= lead.level_id > follow.level_id ? lead.level.name : follow.level.name %>
        </td>
        <% if @track_ages %>
        <td class="text-center px-2">
          <%= lead.age_id > follow.age_id ? lead.age.description : follow.age.description %>
        </td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>

  <div class="mt-4 flex justify-between items-center">
    <div class="mx-auto">
    <%= link_to 'Couple Entries', couples_entries_path, class: "btn-green" %>
    <%= link_to 'Back to Event', root_path, class: "btn-green" %>
    </div>
  </div>
</div>
