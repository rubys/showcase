# Navigator Maintenance Mode Configuration
# This configuration is used during container startup while initialization runs.
# Navigator shows a maintenance page until initialization completes and generates
# the full configuration in config/navigator.yml.

server:
  listen: 3000
  hostname: localhost

  # Static file serving for maintenance page
  static:
    public_dir: public
    allowed_extensions: [html, css, js, png, jpg, svg, ico]

# Maintenance mode configuration
# While enabled=true, all requests receive the maintenance page (except /up health check)
# This allows the server to listen immediately while initialization runs in background
maintenance:
  enabled: true
  page: /503.html

# Server ready hook: runs initialization scripts
# After successful hook execution, Navigator will reload with config/navigator.yml
hooks:
  server:
    ready:
      - command: ruby
        args:
          - script/nav_initialization.rb
        timeout: 5m  # Allow up to 5 minutes for initialization (S3 sync, etc.)
        reload_config: config/navigator.yml  # Switch to this config file after hook succeeds

# Logging configuration
logging:
  format: text  # Use text format for easier debugging during startup
