<div class="mx-auto md:w-2/3 lg:w-1/2">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
  <% end %>

  <% if @region %>
  <h1 class="mt-8 text-center font-bold text-4xl mb-8"><span class="text-blue-600"><%= @region %></span> Region</h1>
  <% elsif @studio %>
  <h1 class="mt-8 text-center font-bold text-4xl mb-8"><span class="text-blue-600"><%= @studio %></span> Events</h1>
  <% else %>
  <h1 class="mt-8 text-center font-bold text-4xl mb-8">Index of Showcases</h1>
  <% end %>

<div data-controller="info-box">
  <div class="info-button">&#x24D8;</div>
  <ul class="info-box">
  <li>When you see an &#x24D8; in the top left corner of the page, you
can click on it to see helpful hints.</li>
  <li>Click on it again to dismiss the hints.</li>
  <li>Click a city below to get started.</li>
  </ul>
</div>

<span data-controller="event-navigation">
  <a rel="up" href="<%= @up %>"></a>
  <% if @prev %><a rel="prev" href="<%= @prev %>"></a><% end %>
  <% if @next %><a rel="next" href="<%= @next %>"></a><% end %>
</span>

<% @showcases.each do |year, sites| %>
  <a href="<%= "#{@scope}/#{year}".squeeze('/') %>/">
    <h2 class="font-bold text-2xl mt-4 mb-2"><%= year %></h2>
  </a>

  <ul class="mt-2 list-disc list-inside">
    <% sites.sort_by {|token, info| info[:name]}.each do |token, info| %>
    <li>
      <% if info[:events] %>
      <a href="<%= "#{@scope}/#{year}/#{token}".squeeze('/') %>/">
        <span class="text-xl"><%= info[:name] %><span>
      </a>
      <ul class="my-2 ml-8 list-disc list-inside">
      <% info[:events].each do |subtoken, info| %>
        <li>
          <a href="<%= "#{@scope}/#{year}/#{token}/#{subtoken}".squeeze('/') %>/">
            <span class="text-xl"><%= info[:name] %><span>
            <span class="text-slate-400">- <%= info['date'] %><span>
          </a>
        </li>
      <% end %>
      </ul>
      <% else %>
      <a href="<%= "#{@scope}/#{year}/#{token}".squeeze('/') %>/">
        <span class="text-xl"><%= info[:name] %><span>
        <span class="text-slate-400">- <%= info['date'] %><span>
      </a>
      <% end %>
    </li>
    <% end %>
  </ul>
<% end %>

<p class="mt-4">Click on the <span class="text-emerald-600">&#x24D8;</span> in the top
    left corner of this page to see helpful hints.</p>

<p class="mt-4 text-right">
  See:
  <%= link_to 'docs', docs_path %>,
  <a href="https://github.com/rubys/showcase#readme">code</a>,
  <a href="https://github.com/rubys/showcase/issues">issues</a>.
</p>

<% if User.index_auth? @authuser %>
<% if ENV['FLY_REGION'] || Rails.env.development? %>
<%= link_to 'Regions', regions_path, class: 'btn-blue' %>
<% if @region %>
<%= link_to 'Status', region_status_path(@region), class: 'btn-orange' %>
<% elsif  Rails.env.development? %>
<%= link_to 'Admin', admin_path, class: 'btn-orange' %>
<% else %>
<%= link_to 'Admin', "https://rubix.intertwingly.net/showcase/admin/", class: 'btn-orange' %>
<% end %>
<% else %>
<%= link_to 'Admin', "https://rubix.intertwingly.net/showcase/admin/", class: 'btn-orange' %>
<% end %>
<% end %>
</div>
